urls = [
	"http://www.dota2.com/hero/Earthshaker/?l=koreana"	
	"http://www.dota2.com/hero/Sven/?l=koreana"	
	"http://www.dota2.com/hero/Tiny/?l=koreana"	
	"http://www.dota2.com/hero/Kunkka/?l=koreana"
	"http://www.dota2.com/hero/Beastmaster/?l=koreana"
	"http://www.dota2.com/hero/Dragon_Knight/?l=koreana"
	"http://www.dota2.com/hero/Clockwerk/?l=koreana"
	"http://www.dota2.com/hero/Omniknight/?l=koreana"
	"http://www.dota2.com/hero/Huskar/?l=koreana"
	"http://www.dota2.com/hero/Alchemist/?l=koreana"
	"http://www.dota2.com/hero/Brewmaster/?l=koreana"
	"http://www.dota2.com/hero/Treant_Protector/?l=koreana"
	"http://www.dota2.com/hero/Io/?l=koreana"
	"http://www.dota2.com/hero/Centaur_Warrunner/?l=koreana"
	"http://www.dota2.com/hero/Timbersaw/?l=koreana"
	"http://www.dota2.com/hero/Bristleback/?l=koreana"
	"http://www.dota2.com/hero/Tusk/?l=koreana"
	"http://www.dota2.com/hero/Elder_Titan/?l=koreana"
	"http://www.dota2.com/hero/Legion_Commander/?l=koreana"
	"http://www.dota2.com/hero/Earth_Spirit/?l=koreana"
	"http://www.dota2.com/hero/Phoenix/?l=koreana"
	"http://www.dota2.com/hero/Anti-Mage/?l=koreana"
	"http://www.dota2.com/hero/Drow_Ranger/?l=koreana"
	"http://www.dota2.com/hero/Juggernaut/?l=koreana"
	"http://www.dota2.com/hero/Mirana/?l=koreana"
	"http://www.dota2.com/hero/Morphling/?l=koreana"
	"http://www.dota2.com/hero/Phantom_Lancer/?l=koreana"
	"http://www.dota2.com/hero/Vengeful_Spirit/?l=koreana"
	"http://www.dota2.com/hero/Riki/?l=koreana"
	"http://www.dota2.com/hero/Sniper/?l=koreana"
	"http://www.dota2.com/hero/Templar_Assassin/?l=koreana"
	"http://www.dota2.com/hero/Luna/?l=koreana"
	"http://www.dota2.com/hero/Bounty_Hunter/?l=koreana"
	"http://www.dota2.com/hero/Ursa/?l=koreana"
	"http://www.dota2.com/hero/Gyrocopter/?l=koreana"
	"http://www.dota2.com/hero/Lone_Druid/?l=koreana"
	"http://www.dota2.com/hero/Naga_Siren/?l=koreana"
	"http://www.dota2.com/hero/Troll_Warlord/?l=koreana"
	"http://www.dota2.com/hero/Ember_Spirit/?l=koreana"
	"http://www.dota2.com/hero/Crystal_Maiden/?l=koreana"
	"http://www.dota2.com/hero/Puck/?l=koreana"
	"http://www.dota2.com/hero/Storm_Spirit/?l=koreana"
	"http://www.dota2.com/hero/Windranger/?l=koreana"
	"http://www.dota2.com/hero/Zeus/?l=koreana"
	"http://www.dota2.com/hero/Lina/?l=koreana"
	"http://www.dota2.com/hero/Shadow_Shaman/?l=koreana"
	"http://www.dota2.com/hero/Tinker/?l=koreana"
	"http://www.dota2.com/hero/Natures_Prophet/?l=koreana"
	"http://www.dota2.com/hero/Enchantress/?l=koreana"
	"http://www.dota2.com/hero/Jakiro/?l=koreana"
	"http://www.dota2.com/hero/Chen/?l=koreana"
	"http://www.dota2.com/hero/Silencer/?l=koreana"
	"http://www.dota2.com/hero/Ogre_Magi/?l=koreana"
	"http://www.dota2.com/hero/Rubick/?l=koreana"
	"http://www.dota2.com/hero/Disruptor/?l=koreana"
	"http://www.dota2.com/hero/Keeper_of_the_Light/?l=koreana"
	"http://www.dota2.com/hero/Skywrath_Mage/?l=koreana"
	"http://www.dota2.com/hero/Oracle/?l=koreana"
	"http://www.dota2.com/hero/Techies/?l=koreana"
	"http://www.dota2.com/hero/Axe/?l=koreana"
	"http://www.dota2.com/hero/Pudge/?l=koreana"
	"http://www.dota2.com/hero/Sand_King/?l=koreana"
	"http://www.dota2.com/hero/Slardar/?l=koreana"
	"http://www.dota2.com/hero/Tidehunter/?l=koreana"
	"http://www.dota2.com/hero/Wraith_King/?l=koreana"
	"http://www.dota2.com/hero/Lifestealer/?l=koreana"
	"http://www.dota2.com/hero/Night_Stalker/?l=koreana"
	"http://www.dota2.com/hero/Doom/?l=koreana"
	"http://www.dota2.com/hero/Spirit_Breaker/?l=koreana"
	"http://www.dota2.com/hero/Lycan/?l=koreana"
	"http://www.dota2.com/hero/Chaos_Knight/?l=koreana"
	"http://www.dota2.com/hero/Undying/?l=koreana"
	"http://www.dota2.com/hero/Magnus/?l=koreana"
	"http://www.dota2.com/hero/Abaddon/?l=koreana"
	"http://www.dota2.com/hero/Bloodseeker/?l=koreana"
	"http://www.dota2.com/hero/Shadow_Fiend/?l=koreana"
	"http://www.dota2.com/hero/Razor/?l=koreana"
	"http://www.dota2.com/hero/Venomancer/?l=koreana"
	"http://www.dota2.com/hero/Faceless_Void/?l=koreana"
	"http://www.dota2.com/hero/Phantom_Assassin/?l=koreana"
	"http://www.dota2.com/hero/Viper/?l=koreana"
	"http://www.dota2.com/hero/Clinkz/?l=koreana"
	"http://www.dota2.com/hero/Broodmother/?l=koreana"
	"http://www.dota2.com/hero/Weaver/?l=koreana"
	"http://www.dota2.com/hero/Spectre/?l=koreana"
	"http://www.dota2.com/hero/Meepo/?l=koreana"
	"http://www.dota2.com/hero/Nyx_Assassin/?l=koreana"
	"http://www.dota2.com/hero/Slark/?l=koreana"
	"http://www.dota2.com/hero/Medusa/?l=koreana"
	"http://www.dota2.com/hero/Terrorblade/?l=koreana"
	"http://www.dota2.com/hero/Bane/?l=koreana"
	"http://www.dota2.com/hero/Lich/?l=koreana"
	"http://www.dota2.com/hero/Lion/?l=koreana"
	"http://www.dota2.com/hero/Witch_Doctor/?l=koreana"
	"http://www.dota2.com/hero/Enigma/?l=koreana"
	"http://www.dota2.com/hero/Necrophos/?l=koreana"
	"http://www.dota2.com/hero/Warlock/?l=koreana"
	"http://www.dota2.com/hero/Queen_of_Pain/?l=koreana"
	"http://www.dota2.com/hero/Death_Prophet/?l=koreana"
	"http://www.dota2.com/hero/Pugna/?l=koreana"
	"http://www.dota2.com/hero/Dazzle/?l=koreana"
	"http://www.dota2.com/hero/Leshrac/?l=koreana"
	"http://www.dota2.com/hero/Dark_Seer/?l=koreana"
	"http://www.dota2.com/hero/Batrider/?l=koreana"
	"http://www.dota2.com/hero/Ancient_Apparition/?l=koreana"
	"http://www.dota2.com/hero/Invoker/?l=koreana"
	"http://www.dota2.com/hero/Outworld_Devourer/?l=koreana"
	"http://www.dota2.com/hero/Shadow_Demon/?l=koreana"
	"http://www.dota2.com/hero/Visage/?l=koreana"
	"http://www.dota2.com/hero/Winter_Wyvern/?l=koreana"
]

fs = require('fs')
async = require('async')
request = require('request')
cheerio = require('cheerio')

print = console.log

async.mapSeries(urls, (url, callback) ->
	content = {}

	request.get url, (err, res, data) ->
		dom1 = cheerio.load data
		skillArray = []

		content.title = dom1('#centerColContent h1').text()
		content.story = dom1('#centerColContent #bioInner').text().trim()

		async.mapSeries(dom1('#abilitiesInner .abilitiesInsetBoxContent'), (index, callback) -> 
			skill = dom1('#abilitiesInner .abilitiesInsetBoxContent').eq(index)
			skillData = {
				title: skill.find('.abilityHeaderRowDescription h2').text()
				story: skill.find('.abilityHeaderRowDescription p').text()
				desc: skill.find('.abilityLore').text()
				info1: skill.find('.abilityHeaderRowDescriptionRight').text().trim()
				info2: skill.find('.abilityFooterBox').text().trim().split('\n')
			}
			skillArray.push skillData

			callback null, true
		, (err, result) ->
			console.log content.title, skillArray.length

			content.skill = skillArray
			hero = { id: content.title, data: content }
			fs.appendFileSync('heroAllData.json', JSON.stringify(hero) + ', \n');
			fs.writeFileSync('hero_' + content.title + '.json', JSON.stringify(hero) + ', \n');
		)
		
		callback null, true
, (err, result) -> 
	console.log "done", result.length
)